---
layout: post
title:  "Struts2的配置"
date:   2017-01-23
excerpt: "本篇介绍了Struts2的相关配置"
tag:
- Java 
- Struts
- SSH框架
comments: false
---



>1.配置文件的加载顺序    
>2.Action的配置   
>3.Aciton配置的默认值   
>4.访问action的路径问题  
>5.常量配置    


***

## 1.配置文件的加载顺序  

![](http://wx3.sinaimg.cn/large/83e1667dgy1fc0p1vpbwsj216u0jqwk3.jpg)

{% highlight html %}
在开发中，后加载文件中的配置会将先加载文件中的配置覆盖。
(简易顺序)
default.properties
struts-default.xml
struts.xml
{% endhighlight %}

***

## 2.Action的配置  

{% highlight xml %}
<package name="default" namespace="/" extends="struts-default">
	<action name="hello" class="cn.itcast.action.HelloAction"
		method="say">
		<result name="good">/hello.jsp</result>
	</action>
</package>
{% endhighlight %}


1.**`<package>`**    
　　用于声明一个包，管理action。  
　　1.name       它用于声明一个包名，包名不能重复，也就是它是唯一的。   
　　2.namespace  它与action标签的name属性合并确定了一个唯一访问action的路径。  
　　3.extends    它代表继承的包名。  
　　4.abstract   它可以取值为true/false，如果为true，代表这个包是用于被继承的。
{: .notice}

2.**`<action>`**    
　　用于声明一个action。  
　　1.name    action的名称，它是唯一的(在同包内)，它与package中的namespace确定了访问action的路径。  
　　2.class   Action类的全名。  
　　3.method  要访问的Action类中的方法的名称，方法无参数，返回值为String。
{: .notice}

3.**`<result>`**   
　　用于确定返回结果类型。    
　　1.name  它与action中的方法返回值做对比，确定跳转路径。  
{: .notice}  

4.**`struts-default`**    
　　该包是在struts2-core-2.x.x.jar文件中的struts-default.xml中定义的。  
　　通常每个包都应该继承struts-default包。  
　　它定义了Struts2内部众多拦截器和Result类型，很多核心的功能都是通过这些内置的拦截器实现的。
{: .notice}

***

## ３.Action配置的默认值  

```xml
<package name="test">
	<action name="helloworld">
		<result>/WEB-INF/page/hello.jsp</result>
	</action>
</package> 

```

如果没有指定namespace，默认值是 ""。  
如果没有为action指定class，默认是ActionSupport。  
如果没有为action指定method，默认执行action中的execute()方法。  
如果没有指定result属性，默认值为“success”。  
注：ActionSupportl类中有execute方法，返回的是“success”。
{: .notice}  

***

## ４.访问action的路径问题  

若现在的action配置为:  

```xml
<package name="default" namespace="/" extends="struts-default">
	<action name="hello" class="cn.itcast.action.DefaultAction">
		<result>/hello.jsp</result>
	</action>
</package>
```

当我们输入:`http://localhost/struts2/a/b/c/hello`时也访问到了action。  
原因：struts2中的action被访问时，它会首先查找：

1.namespace="/a/b/c"　　　action的name=hello  没有  
2.namespace="/a/　　　　　action的name=hello  没有  
3.namespace="/a"　　　　　action的name=hello  没有  
4.namespace="/"　　　　　　action的name=hello  查找到了  
如果最后也查找不到，会报404错误。
{: .notice}  

***

## 5.Result配置


浏览器重定向引导浏览器访问某个路径，不能访问WEB-INF下的jsp，路径变化。    
服务器内部请求转发时才可以访问到。  
采用重定向实现转发  

转发是服务器行为，重定向是客户端行为  
也就是说客户是感觉不到服务器做了转发的。转发行为是浏览器只做了一次访问请求。
客户可以观察到地址的变化的。重定向行为是浏览器做了至少两次的访问请求的。


